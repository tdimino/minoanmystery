---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const projects = [
  {
    slug: 'acs',
    title: 'American College of Surgeons',
    summary: "Partnered with Hugo & Cat, I audited the American College of Surgeons's website, and prioritized the migration of all their content, while redefining ACS's voice, tone, and brand.",
    image: '/images/portfolio/hero-acs.jpg',
  },
  {
    slug: 'czi',
    title: 'Chan Zuckerberg Initiative',
    summary: 'At CZI, I co-led the "Bravo Cohort" to design a learning platform and training materials for biology PhDs and imaging scientists.',
    image: '/images/portfolio/hero-czi.png',
  },
  {
    slug: 'dolby',
    title: 'Dolby Laboratories',
    summary: "On a small team at Valtech, I re-designed Dolby.com's consumer and professional websites, distilling them into twelve annotated templates still in-use by Dolby today.",
    image: '/images/portfolio/hero-dolby.png',
  },
];
---

<BaseLayout
  title="An iconoclast against labyrinths, and soulless writing"
  description="The human language system remains the most potent magic known to us. At Minoan Mystery, I dig to the root of what you do, and make it more powerful with words."
  image="/images/og/og-home-1.png"
>
  <Header slot="header" />

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title skew-animate">
        Poet-turned <em>AI/ML engineer</em> at <a href="https://aldea.ai/" target="_blank" rel="noopener noreferrer" class="stealth-link"><span class="highlight-bold">Aldea AI</span></a>; <strong>ex-JPMorgan, Google, & CZI</strong>.
      </h1>
      <p class="paragraph-large front-page fade-animate">
        In a past life, I had a fondness for solving puzzles and following upstarts, so I'm quite smitten by any digital work involving: <span class="skills">scaleable A.I. prototypes</span> for enterprise clients; <span class="skills">copy</span> and <span class="skills">UI design</span> for startups; <span class="skills">full-stack A.I./ML apps</span>, tech <span class="skills">documentation</span>; UX <span class="skills">personas</span>; and <span class="skills">co-design</span> workshops.
      </p>
      <p class="cta-text fade-animate">
        <strong>Perhaps <a href="/contact" class="link-highlight">we should chat</a>?</strong> <span class="cta-emoji">ðŸ”®</span>
      </p>
    </div>
  </section>

  <!-- Divider -->
  <div class="container">
    <div class="divider"></div>
  </div>

  <!-- Past Projects Section -->
  <section class="section past-projects">
    <div class="container">
      <h2 class="section-title skew-animate">Past projects of interest</h2>
      <div class="projects-list">
        {projects.map((project) => (
          <a href={`/portfolio/${project.slug}`} class="project-row">
            <div class="project-content scale-animate">
              <h3 class="project-title">
                {project.title}
              </h3>
              <p class="project-summary">{project.summary}</p>
              <span class="view-project">
                <span class="view-project-text">
                  <span>View project</span>
                  <span class="arrow-icon"></span>
                </span>
                <span class="view-project-underline"></span>
              </span>
            </div>
            <div class="project-image scale-animate">
              <div class="image-reveal-container">
                <img src={project.image} alt={project.title} loading="lazy" />
                <div class="image-reveal-overlay"></div>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Footer -->
  <Footer slot="footer" />
</BaseLayout>

<style>
  /* Hero */
  .hero {
    padding: var(--space-2xl) 0 var(--space-xl);
  }

  .hero-title {
    font-size: 60px;
    font-weight: 500;
    line-height: 70px;
    margin-bottom: 24px;
    color: var(--color-text);
  }

  .hero-title em {
    font-style: italic;
    font-weight: 500;
  }

  .hero-title .highlight-bold {
    font-style: italic;
    font-weight: 700;
    color: var(--color-primary);
  }

  .hero-title strong {
    font-weight: 700;
  }

  .cta-text {
    margin-top: var(--space-md);
    font-size: 24px;
    line-height: 36px;
  }

  /* Hero paragraph links should match text color */
  .hero p a,
  .hero .paragraph-large a {
    color: var(--color-text);
    text-decoration: underline;
  }

  .link-highlight {
    text-decoration: underline;
    text-underline-offset: 3px;
    background-color: var(--color-highlight);
    padding: 0; /* Matching Webflow - no padding */
  }

  .hero .link-highlight:hover {
    color: var(--color-text-muted) !important;
  }

  .stealth-link {
    color: inherit;
    text-decoration: none;
  }

  .stealth-link:hover {
    color: inherit;
  }

  /* Front page paragraph - Webflow exact */
  .paragraph-large.front-page {
    font-size: 22px;
  }

  /* Skills text - purple, same font weight as surrounding text */
  .skills {
    color: var(--color-primary);
  }

  .cta-emoji {
    font-size: 1.5rem;
    margin-left: 0.25rem;
  }

  /* Past projects section - tighter spacing from divider */
  .past-projects {
    padding-top: var(--space-md);
  }

  /* Section title */
  .section-title {
    font-size: 48px;
    font-weight: 500;
    text-align: center;
    margin: 0 0 16px;
  }

  /* Projects list - staggered layout */
  .projects-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
  }

  .project-row {
    display: grid;
    grid-template-columns: 1.1fr 1.4fr;
    gap: 0;
    align-items: stretch;
    text-decoration: none;
    color: inherit;
    border: 1px solid var(--color-border);
    background: var(--color-background);
    transition: transform 0.35s ease;
  }

  .project-row:hover {
    transform: scale(0.98);
  }

  .project-content {
    padding: var(--space-md) var(--space-md) var(--space-md);
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .project-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: var(--space-sm);
    color: var(--color-text);
    transition: color 0.35s ease;
  }

  .project-row:hover .project-title {
    color: var(--color-text-muted);
  }

  .project-summary {
    color: var(--color-text-muted);
    line-height: 1.6;
    margin: 0 0 var(--space-sm) 0;
  }

  .view-project {
    display: inline-flex;
    flex-direction: column;
    align-items: flex-start;
    margin-top: var(--space-sm);
    width: fit-content;
  }

  .view-project-text {
    display: inline-flex;
    align-items: center;
    font-size: 20px;
    line-height: 22px;
    font-weight: 700;
    color: var(--color-text);
  }

  .view-project .arrow-icon {
    display: inline-block;
    width: 18px;
    height: 18px;
    margin-left: 8px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230d0d0d' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='5' y1='19' x2='19' y2='5'%3E%3C/line%3E%3Cpolyline points='9 5 19 5 19 15'%3E%3C/polyline%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    transition: transform var(--transition-fast);
  }

  .project-row:hover .view-project .arrow-icon {
    transform: translate(4px, -4px);
  }

  /* Invert arrow to white in dark mode */
  :global([data-theme='dark']) .view-project .arrow-icon {
    filter: invert(1);
  }

  .view-project-underline {
    width: 0;
    height: 2px;
    background-color: var(--color-text);
    margin-top: 14px;
    transition: width 0.35s ease;
  }

  .project-row:hover .view-project-underline {
    width: 100%;
  }

  .project-image {
    overflow: hidden;
    height: 100%;
    display: flex;
    align-items: center;
    padding: 12px 0;
  }

  .project-image .image-reveal-container {
    height: 100%;
    width: 100%;
  }

  .project-image img {
    width: 100%;
    height: auto;
    object-fit: contain;
    display: block;
    transition: transform 0.4s ease;
  }

  .project-row:hover .project-image img {
    transform: scale(1.08);
  }

  /* Image reveal animation - black overlay swipes right to left */
  .image-reveal-container {
    position: relative;
    overflow: hidden;
  }

  .image-reveal-overlay {
    position: absolute;
    inset: 0;
    background-color: #0d0d0d;
    transform: translateX(0);
  }

  .image-reveal-container.revealed .image-reveal-overlay {
    animation: reveal-swipe 1s ease-out forwards;
  }

  @keyframes reveal-swipe {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(100%);
    }
  }

  @media (max-width: 768px) {
    .hero {
      padding-top: var(--space-lg);
    }

    .hero-title {
      font-size: 48px;
      line-height: 58px;
    }

    /* Responsive front page paragraph - Webflow mobile */
    .paragraph-large.front-page {
      font-size: 18px;
      font-weight: 600;
    }

    .skills {
      font-weight: 700;
    }

    .project-row,
    .project-row.reverse {
      grid-template-columns: 1fr;
      direction: ltr;
    }

    .project-row.reverse > * {
      direction: ltr;
    }

    .project-content,
    .project-row.reverse .project-content {
      padding: var(--space-md);
      order: 2;
    }

    .project-image {
      order: 1;
    }

    .section-title {
      font-size: 40px;
    }

    .project-summary {
      font-weight: 600;
    }
  }
</style>

<script>
  // Reveal animation on scroll for project images
  function initImageReveal() {
    const revealContainers = document.querySelectorAll('.image-reveal-container');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('revealed');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.3
    });

    revealContainers.forEach(container => {
      observer.observe(container);
    });
  }

  // Run on initial load
  initImageReveal();

  // Re-run after View Transitions
  document.addEventListener('astro:after-swap', initImageReveal);
</script>
